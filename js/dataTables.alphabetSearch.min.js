/*! AlphabetSearch for DataTables v1.2.7
 * 2014 SpryMedia Ltd - datatables.net/license
 * Gyrocode LLC - MIT License
 */
!function(a){function e(e,t,r){t.empty(),""!==r.oLanguage.alphabetSearch.infoDisplay&&a('<span class="alphabet-info-display"></span>').html(r.oLanguage.alphabetSearch.infoDisplay).appendTo(t);var n=e.column(r.alphabetSearch.column,{search:"applied"}).data(),h=function(a){for(var e,t={},r=0,n=a.length;r<n;r++)e=a[r].toString().replace(/<.*?>/g,"").charAt(0).toUpperCase(),/\d/.test(e)&&(e="#"),t[e]?t[e]++:t[e]=1;return t}(n),l=a("<ul/>");a("<a/>").attr("href","javascript:;").data("letter","").data("match-count",n.length).addClass(r.alphabetSearch.letter?"":"active").html("<span>"+r.oLanguage.alphabetSearch.infoAll+"</span>").wrap("<li/>").parent().appendTo(l);for(var c=0;c<r.oLanguage.alphabetSearch.alphabet.length;c++){var p=r.oLanguage.alphabetSearch.alphabet[c];a("<a/>").attr("href","javascript:;").data("letter",p).data("match-count",h[p]||0).addClass((h[p]?"":"empty")+(r.alphabetSearch.letter===p?" active":"")).html("<span>"+p+"</span>").wrap("<li/>").parent().appendTo(l)}l.appendTo(t),a('<div class="alphabet-info"></div>').appendTo(t),r.alphabetSearch.letter&&(r.alphabetSearch.letterSearch=r.alphabetSearch.letter,e.draw(),r.alphabetSearch.letterSearch=""),e.one("search.dt.dtAlphabetSearch",function(e,t){new a.fn.dataTable.Api(t).alphabetSearch.recalc()})}a.fn.dataTable.Api.register("alphabetSearch()",function(a){return this.iterator("table",function(e){e.alphabetSearch.letter=a}),this}),a.fn.dataTable.Api.register("alphabetSearch.recalc()",function(){return this.iterator("table",function(t){e(new a.fn.dataTable.Api(t),a("div.alphabet",this.table().container()),t)}),this}),a.fn.dataTable.ext.search.push(function(a,e){if(!a.hasOwnProperty("alphabetSearch"))return!0;if(!a.alphabetSearch.letterSearch)return!0;var t=e[a.alphabetSearch.column].toString().replace(/<.*?>/g,"").charAt(0).toUpperCase();if("#"!==a.alphabetSearch.letterSearch){if(t===a.alphabetSearch.letterSearch)return!0}else if(/\d/.test(t))return!0;return!1}),a.fn.dataTable.ext.order.alphabetSearch=function(a,e){var t=this.api().order()[0][0],r=this.api().order()[0][1];t!==a.alphabetSearch.column&&(a.alphabetSearch.pass=0);var n=this.api().column(e,{order:"index"}).data().map(function(e,n){var h=e.toString().replace(/<.*?>/g,""),l=h.charAt(0).toUpperCase();if(t===a.alphabetSearch.column){if(0===a.alphabetSearch.pass)return"";if("asc"===r)return h;var c="";if(a.alphabetSearch.letterSearch)for(var p=0;p<h.length;p++)c+=String.fromCharCode(65535-h.charCodeAt(p));else for(p=0;p<h.length;p++)c+=p?h.charAt(p):String.fromCharCode(65535-h.charCodeAt(p));return c}return l});return t===a.alphabetSearch.column&&(a.alphabetSearch.pass||(a.alphabetSearch.pass=0),a.alphabetSearch.pass=(a.alphabetSearch.pass+1)%2),n},a.fn.dataTable.AlphabetSearch=function(t){var r=new a.fn.dataTable.Api(t),n=a('<div class="alphabet text-center"/>');t.oLanguage.alphabetSearch=a.extend({alphabet:"#ABCDEFGHIJKLMNOPQRSTUVWXYZ",infoDisplay:"Display:",infoAll:"All"},t.oLanguage.alphabetSearch?t.oLanguage.alphabetSearch:{}),t.oLanguage.alphabetSearch.alphabet.toUpperCase(),t.alphabetSearch=a.extend({column:0},a.isPlainObject(t.oInit.alphabetSearch)?t.oInit.alphabetSearch:{},{letter:"",letterSearch:"",pass:0}),t.alphabetSearch.column>=0&&t.alphabetSearch.column<t.aoColumns.length&&(t.aoColumns[t.alphabetSearch.column].sSortDataType="alphabetSearch"),t.hasOwnProperty("aaSortingFixed")&&"object"==typeof t.aaSortingFixed?a.isArray(t.aaSortingFixed)?t.aaSortingFixed.length&&!a.isArray(t.aaSortingFixed[0])?t.aaSortingFixed=[[t.alphabetSearch.column,"asc"],t.aaSortingFixed]:t.aaSortingFixed.unshift([t.alphabetSearch.column,"asc"]):(t.aaSortingFixed.hasOwnProperty("pre")||(t.aaSortingFixed.pre=[]),t.aaSortingFixed.pre.length&&!a.isArray(t.aaSortingFixed.pre[0])?t.aaSortingFixed.pre=[[t.alphabetSearch.column,"asc"],t.aaSortingFixed.pre]:t.aaSortingFixed.pre.unshift([t.alphabetSearch.column,"asc"])):t.aaSortingFixed=[t.alphabetSearch.column,"asc"],e(r,n,t),n.on("click","a",function(e){e.preventDefault(),n.find(".active").removeClass("active"),a(this).addClass("active"),r.alphabetSearch(a(this).data("letter")).draw()}),n.on("mouseenter","a",function(){var e=a(this),t=e.position(),r=a(".alphabet-info",n);r.html(e.data("match-count")),r.css({opacity:1,left:t.left+Math.round((e.outerWidth()-r.outerWidth())/2),top:a(this).position().top+e.outerHeight()})}).on("mouseleave","a",function(){n.find("div.alphabet-info").css("opacity",0)}),r.on("draw.dt.dtAlphabetSearch",function(e,t){var r=new a.fn.dataTable.Api(t),n=r.columns().nodes().length,h=r.rows({page:"current"}).nodes(),l=null;if(r.column(t.alphabetSearch.column,{page:"current"}).data().each(function(e,t){var r=e.toString().replace(/<.*?>/g,"").charAt(0).toUpperCase();l!==r&&(a(h).eq(t).before('<tr class="alphabet-group"><td colspan="'+n+'">'+r+"</td></tr>"),l=r)}),!h.length&&t.alphabetSearch){var c=t.alphabetSearch.letter;a(r.table().body()).prepend('<tr class="alphabet-group"><td colspan="'+n+'">'+c+"</td></tr>")}}),r.on("destroy.dt.dtAlphabetSearch",function(e,t){new a.fn.dataTable.Api(t).off(".dtAlphabetSearch")}),this.node=function(){return n}},a.fn.DataTable.AlphabetSearch=a.fn.dataTable.AlphabetSearch,a.fn.dataTable.ext.feature.push({fnInit:function(e){return new a.fn.dataTable.AlphabetSearch(e).node()},cFeature:"A"})}(jQuery);
